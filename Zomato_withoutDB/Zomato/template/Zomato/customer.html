<!DOCTYPE html>
<html>
<head>
    <title>Customer</title>
</head>
<body>
    <h1>Welcome Customer!</h1>
    <h2>Register Customer</h2>
    <form id="register-customer-form">
        <input type="text" id="customer-name" placeholder="Customer Name">
        <button type="button" id="register-customer-btn">Register</button>
    </form>
    <h2>View Restaurants</h2>
    <ul id="restaurant-list"></ul>
    <h2>Place Order</h2>
    <form id="place-order-form">
        <select id="restaurant-dropdown"></select>
        <textarea id="order-items" placeholder="Order Items"></textarea>
        <button type="button" id="place-order-btn">Place Order</button>
    </form>
</body>
<script>
    const registerCustomerBtn = document.getElementById('register-customer-btn');
const customerNameInput = document.getElementById('customer-name');
const restaurantList = document.getElementById('restaurant-list');
const restaurantDropdown = document.getElementById('restaurant-dropdown');
const orderItemsInput = document.getElementById('order-items');
const placeOrderBtn = document.getElementById('place-order-btn');

registerCustomerBtn.addEventListener('click', () => {
    const customerName = customerNameInput.value;
    
    // Prepare data for the POST request
    const formData = new FormData();
    formData.append('name', customerName);
    
    // Send a POST request to register the customer
    fetch('/register/customer/', {
        method: 'POST',
        body: formData
    })
    .then(response => response.json())
    .then(data => {
        console.log(data.message); // Display the response message
        updateRestaurantDropdown(); // Update the restaurant dropdown
    })
    .catch(error => {
        console.error('Error:', error);
    });
});

function updateRestaurantDropdown() {
    // Fetch the list of available restaurants
    fetch('/view/restaurants/')
    .then(response => response.json())
    .then(restaurants => {
        // Update the restaurant dropdown in the HTML
        restaurantDropdown.innerHTML = '';
        restaurants.forEach(restaurant => {
            const option = document.createElement('option');
            option.value = restaurant;
            option.textContent = restaurant;
            restaurantDropdown.appendChild(option);
        });
    })
    .catch(error => {
        console.error('Error:', error);
    });
}

// Initial call to populate the restaurant dropdown
updateRestaurantDropdown();

placeOrderBtn.addEventListener('click', () => {
    const selectedRestaurant = restaurantDropdown.value;
    const orderItems = orderItemsInput.value;
    
    // Prepare data for the POST request
    const formData = new FormData();
    formData.append('customer', customerNameInput.value);
    formData.append('restaurant', selectedRestaurant);
    formData.append('items', orderItems);
    
    // Send a POST request to place the order
    fetch('/place/order/', {
        method: 'POST',
        body: formData
    })
    .then(response => response.json())
    .then(data => {
        console.log(data.message); // Display the response message
        // Clear the order items input after placing the order
        orderItemsInput.value = '';
    })
    .catch(error => {
        console.error('Error:', error);
    });
});


placeOrderBtn.addEventListener('click', () => {
    const selectedRestaurant = restaurantDropdown.value;
    const orderItems = orderItemsInput.value;
    
    // Prepare data for the POST request
    const formData = new FormData();
    formData.append('customer', customerNameInput.value);
    formData.append('restaurant', selectedRestaurant);
    formData.append('items', orderItems);
    
    // Send a POST request to place the order
    fetch('/place/order/', {
        method: 'POST',
        body: formData
    })
    .then(response => response.json())
    .then(data => {
        console.log(data.message); // Display the response message
        // Clear the order items input after placing the order
        orderItemsInput.value = '';
    })
    .catch(error => {
        console.error('Error:', error);
    });
});

    // Implement the logic to fetch restaurant data and handle order placement here

</script>
</html>
