<!DOCTYPE html>
<html>
<head>
    <title>Restaurant Owner</title>
</head>
<body>
    <h1>Welcome Restaurant Owner!</h1>
    <h2>Register Restaurant</h2>
    <form id="register-restaurant-form">
        <input type="text" id="restaurant-name" placeholder="Restaurant Name">
        <textarea id="inventory" placeholder="Inventory"></textarea>
        <button type="button" id="register-restaurant-btn">Register</button>
    </form>
    <h2>Manage Inventory</h2>
    <p>Select a restaurant:</p>
    <select id="restaurant-list"></select>
    <div id="inventory-display"></div>
</body>
<script>
    const registerRestaurantBtn = document.getElementById('register-restaurant-btn');
const restaurantNameInput = document.getElementById('restaurant-name');
const inventoryInput = document.getElementById('inventory');
const restaurantList = document.getElementById('restaurant-list');
const inventoryDisplay = document.getElementById('inventory-display');

registerRestaurantBtn.addEventListener('click', () => {
    const restaurantName = restaurantNameInput.value;
    const inventory = inventoryInput.value;
    
    // Prepare data for the POST request
    const formData = new FormData();
    formData.append('name', restaurantName);
    formData.append('inventory', inventory);
    
    // Send a POST request to register the restaurant
    fetch('/register/restaurant/', {
        method: 'POST',
        body: formData
    })
    .then(response => response.json())
    .then(data => {
        console.log(data.message); // Display the response message
        updateRestaurantList(); // Update the restaurant list
    })
    .catch(error => {
        console.error('Error:', error);
    });
});

function updateRestaurantList() {
    // Fetch the list of registered restaurants
    fetch('/view/restaurants/')
    .then(response => response.json())
    .then(restaurants => {
        // Update the restaurant list in the HTML
        restaurantList.innerHTML = '';
        restaurants.forEach(restaurant => {
            const option = document.createElement('option');
            option.value = restaurant;
            option.textContent = restaurant;
            restaurantList.appendChild(option);
        });
    })
    .catch(error => {
        console.error('Error:', error);
    });
}

restaurantList.addEventListener('change', () => {
    const selectedRestaurant = restaurantList.value;
    
    // Fetch and display the inventory for the selected restaurant
    fetch(`/restaurant/${selectedRestaurant}/inventory/`)
    .then(response => response.json())
    .then(inventory => {
        // Update the inventory display in the HTML
        inventoryDisplay.textContent = inventory;
    })
    .catch(error => {
        console.error('Error:', error);
    });
});

</script>
</html>
